(function(){angular.module("instaguideApp",["ngRoute","ngSanitize","ui.bootstrap"]);function e(e,t){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/genericText.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/guide/:guideid",{templateUrl:"/guideDetail/guideDetail.view.html",controller:"guideDetailCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode(true)}angular.module("instaguideApp").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("instaguideApp").controller("homeCtrl",e);e.$inject=["$scope","instaguideData","geolocationData"];function e(e,t,n){var o=this;o.pageHeader={title:"Loc8r",strapline:"Find places to work with wifi near you!"};o.sidebar={content:"Looking for wifi and a seat? Etc etc"};o.message="Checking your location";o.getData=function(e){var n=e.coords.latitude,i=e.coords.longitude;o.message="Searching for nearby places";t.guideByCoords(n,i).success(function(e){console.log("data is ");console.log(e);o.message=e.length>0?"":"No locations found nearby";o.data={guides:e}}).error(function(e){o.message="Sorry, something's gone wrong"})};o.showError=function(t){e.$apply(function(){o.message=t.message})};o.noGeo=function(){e.$apply(function(){o.message="Geolocation is not supported by this browser."})};n.getPosition(o.getData,o.showError,o.noGeo)}})();(function(){angular.module("instaguideApp").controller("aboutCtrl",e);e.$inject=["$sce"];function e(e){var t=this;t.pageHeader={title:"About Instaguide"};t.main={content:e.trustAsHtml("Loc8r was created to help people find places to sit down and get a bit of work done.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit.")};console.log("vm is ");console.log(t)}})();(function(){angular.module("instaguideApp").controller("guideDetailCtrl",e);e.$inject=["$routeParams","$modal","instaguideData"];function e(e,t,n){var o=this;o.guideid=e.guideid;n.guideById(o.guideid).success(function(e){console.log("data is ");console.log(e);o.time={days:"Monday"};o.pageHeader={title:e.name};o.data={guide:e}}).error(function(e){});o.popupReviewForm=function(){console.log("in popupReviewForm ");o.popupReviewForm=function(){var e=t.open({templateUrl:"/reviewModal/reviewModal.view.html",controller:"reviewModalCtrl as vm"})}}}})();(function(){angular.module("instaguideApp").controller("reviewModalCtrl",e);e.$inject=["$modalInstance"];function e(e){var t=this;t.modal={cancel:function(){e.dismiss("cancel")}}}})();(function(){angular.module("instaguideApp").service("geolocationData",e);function e(){var e=function(e,t,n){console.log("in the getPosition");if(navigator.geolocation){navigator.geolocation.getCurrentPosition(e,t)}else{n()}};return{getPosition:e}}})();(function(){angular.module("instaguideApp").service("instaguideData",e);e.$inject=["$http"];function e(e){var t=function(t,n){return e.get("/api/guides?lng="+n+"&lat="+t+"&maxDistance=20")};var n=function(t){return e.get("/api/guides/"+t)};return{guideByCoords:t,guideById:n}}})();(function(){angular.module("instaguideApp").filter("formatDistance",t);var e=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};function t(){return function(t){var n,o;if(t&&e(t)){if(t>1){n=parseFloat(t).toFixed(1);o="km"}else{n=parseInt(t*1e3,10);o="m"}return n+o}else{return"?"}}}})();(function(){angular.module("instaguideApp").filter("formatTimes",e);function e(){return function(e){var t="";if(e instanceof Array){for(var n=0;n<e.length;n++){t+=e[n]+" "}}return t}}})();(function(){angular.module("instaguideApp").filter("addHtmlLineBreaks",e);function e(){return function(e){console.log("text is ");console.log(e.toString());var t=e.toString().replace(/\n/g,"<br/>");return t}}})();(function(){angular.module("instaguideApp").directive("ratingStars",e);function e(){return{restrict:"EA",scope:{thisRating:"=ratingNum"},templateUrl:"/common/directives/ratingStars/ratingStars.template.html"}}})();(function(){angular.module("instaguideApp").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){angular.module("instaguideApp").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("instaguideApp").directive("pageHeader",e);function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();